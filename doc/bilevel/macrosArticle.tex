%\newfloat{example}{htbp}{lop}
%\floatname{example}{Example}

\newcommand{\indexsolver}[1]{\index{#1 solver}\index{solver!#1}}

\newcommand{\code}[1]{\textmd{\texttt{#1}}}
\newcommand{\todo}[1]{\textbf{\textit{TODO: #1}}}
\newcommand{\comment}[1]{\marginpar{\textit{#1}}}
\newcommand{\st}{\textrm{s.t.}}

\newenvironment{notebox}%
  {\begin{table}\begin{center}\begin{Sbox}\begin{minipage}{.8\textwidth}{\bf NOTE:}}
  {\end{minipage}\end{Sbox}\fbox{\TheSbox}\end{center}\end{table}}

\newenvironment{Xnotebox}%
  {\begin{table}\begin{center}\begin{svgraybox}\begin{minipage}{.8\textwidth}{\bf NOTE:}}
  {\end{minipage}\end{svgraybox}\end{center}\end{table}}

% TODO: confirm that this is the final version for the book.
\newcommand{\PyomoVersion}{4.0}

\lstnewenvironment{otherlisting}%
  {\lstset{
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    basicstyle=\footnotesize\ttfamily ,
    backgroundcolor=\color{white}
    }}
  {}

\lstnewenvironment{qlisting}%
  {\lstset{
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    basicstyle=\footnotesize\ttfamily ,
    backgroundcolor=\color{white},
    language=Python
    }}
  {}

\lstnewenvironment{qautobreaklisting}%
  {\lstset{
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    breaklines=true,
    breakatwhitespace=true,
    prebreak={\textbackslash},
    basicstyle=\footnotesize\ttfamily ,
    backgroundcolor=\color{white},
    language=Python
    }}
  {}


%
% Syntax: \listing{<filename>}{<anchor>}{<firstline>}{<lastline>}
%
% NOTE: the firstline and lastline data is automatically generated.  For example:
%
%   \listing{foo}{bar}
%
% is initialized to find the 'bar' anchor in file 'foo'.  Additionally, if we have
%
%   \listing{foo}{}
%
% then the entire file 'foo' is include.
%
% This is the main macro used to pull in text from files
\newcommand{\listing}[4]{\lstinputlisting[firstline=#3,lastline=#4,
    aboveskip=0.5em,
    belowskip=0.5em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    basicstyle=\footnotesize\ttfamily ,
    backgroundcolor=\color{white},
    language=Python
    ]{#1}}

% Like listing, but keep spaces
\newcommand{\spacedlisting}[4]{\lstinputlisting[firstline=#3,lastline=#4,
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    basicstyle=\footnotesize\ttfamily ,
    backgroundcolor=\color{white},
    language=Python
    ]{#1}}

% Like listing, but allow breaks across pages
\newcommand{\autobreaklisting}[4]{\lstinputlisting[firstline=#3,lastline=#4,
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    breaklines=true,
    breakatwhitespace=true,
    prebreak={\textbackslash},
    basicstyle=\footnotesize\ttfamily ,
    backgroundcolor=\color{white},
    language=Python
    ]{#1}}


% Like listing, but script size font
\newcommand{\scriptsizelisting}[4]{\lstinputlisting[firstline=#3,lastline=#4,
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    basicstyle=\scriptsize\ttfamily ,
    backgroundcolor=\color{white},
    language=Python
    ]{#1}}

% Like listing, but tiny size font
\newcommand{\tinylisting}[4]{\lstinputlisting[firstline=#3,lastline=#4,
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    basicstyle=\tiny\ttfamily ,
    backgroundcolor=\color{white},
    language=Python
    ]{#1}}

% Like listing, but (a) keep spaces and (b) don't format as a Python script
\newcommand{\datalisting}[4]{\lstinputlisting[firstline=#3,lastline=#4,
    aboveskip=0.3em,
    belowskip=0.3em,
    xleftmargin=1.5em,
    xrightmargin=1.5em,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    columns=fullflexible,
    frame=single,
    basicstyle=\footnotesize\ttfamily ,
    backgroundcolor=\color{white}
    ]{#1}}

